<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CKM Syndrome Severity Score Calculator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply the Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for number input arrows */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 sm:p-8">

    <div class="bg-white w-full max-w-3xl p-6 sm:p-10 rounded-2xl shadow-xl">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">CKM Severity Score Calculator</h1>
            <p class="text-gray-500 mt-2">Calculate your continuous Cardiovascular-Kidney-Metabolic Syndrome score.</p>
        </div>

        <!-- Calculator Form -->
        <form id="ckm-form" class="space-y-6">

            <!-- Demographics Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="gender" class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                    <select id="gender" name="gender" required class="w-full p-3 border border-gray-300 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select Gender</option>
                        <option value="men">Men</option>
                        <option value="women">Women</option>
                    </select>
                </div>
                <div>
                    <label for="age" class="block text-sm font-medium text-gray-700 mb-1">Age (20-80)</label>
                    <input type="number" id="age" name="age" placeholder="e.g., 45" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <!-- Clinical Indicators Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="sbp" class="block text-sm font-medium text-gray-700 mb-1">Systolic Blood Pressure (SBP)</label>
                    <input type="number" step="0.1" id="sbp" name="sbp" placeholder="e.g., 120" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="wc" class="block text-sm font-medium text-gray-700 mb-1">Waist Circumference (cm)</label>
                    <input type="number" step="0.1" id="wc" name="wc" placeholder="e.g., 90" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="fpg" class="block text-sm font-medium text-gray-700 mb-1">Fasting Plasma Glucose (mg/dL)</label>
                    <input type="number" step="0.1" id="fpg" name="fpg" placeholder="e.g., 100" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="tg" class="block text-sm font-medium text-gray-700 mb-1">Triglycerides (mg/dL)</label>
                    <input type="number" step="0.1" id="tg" name="tg" placeholder="e.g., 150" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="hdlc" class="block text-sm font-medium text-gray-700 mb-1">HDL Cholesterol (mg/dL)</label>
                    <input type="number" step="0.1" id="hdlc" name="hdlc" placeholder="e.g., 50" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="egfr" class="block text-sm font-medium text-gray-700 mb-1">eGFR (mL/min/1.73 mÂ²)</label>
                    <input type="number" step="0.1" id="egfr" name="egfr" placeholder="e.g., 90" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4">
                <button type="reset" id="reset-button" class="w-full p-3 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 transition duration-300">
                    Reset
                </button>
                <button type="submit" class="w-full p-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition duration-300">
                    Calculate Score
                </button>
            </div>
        </form>

        <!-- Error Message Display -->
        <div id="error-message" class="mt-6 text-center text-red-600 font-medium hidden">
            <!-- Error text will be inserted here -->
        </div>

        <!-- Result Display -->
        <div id="result-container" class="mt-8 pt-6 border-t border-gray-200 text-center hidden">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">Your Continuous CKM Score is:</h2>
            <p id="score-display" class="text-6xl font-bold text-blue-600">
                <!-- Score will be inserted here -->
            </p>
        </div>

    </div>

    <!-- JavaScript Logic -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('ckm-form');
        const resultContainer = document.getElementById('result-container');
        const scoreDisplay = document.getElementById('score-display');
        const errorMessage = document.getElementById('error-message');

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            resultContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');

            const gender = document.getElementById('gender').value;
            const age = parseFloat(document.getElementById('age').value);
            const sbp = parseFloat(document.getElementById('sbp').value);
            const wc = parseFloat(document.getElementById('wc').value);
            const fpg = parseFloat(document.getElementById('fpg').value);
            const tg = parseFloat(document.getElementById('tg').value);
            const hdlc = parseFloat(document.getElementById('hdlc').value);
            const egfr = parseFloat(document.getElementById('egfr').value);

            if (!gender || [age, sbp, wc, fpg, tg, hdlc, egfr].some(isNaN)) {
                showError('Please fill out all fields with valid numbers.');
                return;
            }
            if (age < 20 || age > 80) {
                showError('Age must be between 20 and 80 to use these formulas.');
                return;
            }

            // --- CKM score formula ---
            let score = 0;
            if (gender === 'men') {
                if (age >= 20 && age <= 39) {
                    score = (0.09 * sbp) + (0.17 * wc) + (0.05 * fpg) + (0.68 * tg) - (0.28 * hdlc) - (0.06 * egfr);
                } else if (age >= 40 && age <= 59) {
                    score = (0.10 * sbp) + (0.23 * wc) + (0.06 * fpg) + (0.56 * tg) - (0.40 * hdlc) - (0.04 * egfr);
                } else if (age >= 60 && age <= 80) {
                    score = (0.07 * sbp) + (0.24 * wc) + (0.08 * fpg) + (0.55 * tg) - (0.39 * hdlc) - (0.06 * egfr);
                }
            } else if (gender === 'women') {
                if (age >= 20 && age <= 39) {
                    score = (0.21 * sbp) + (0.31 * wc) + (0.22 * fpg) + (0.48 * tg) - (0.25 * hdlc) - (0.06 * egfr);
                } else if (age >= 40 && age <= 59) {
                    score = (0.08 * sbp) + (0.14 * wc) + (0.06 * fpg) + (0.72 * tg) - (0.22 * hdlc) - (0.05 * egfr);
                } else if (age >= 60 && age <= 80) {
                    score = (0.07 * sbp) + (0.13 * wc) + (0.08 * fpg) + (0.64 * tg) - (0.36 * hdlc) - (0.04 * egfr);
                }
            }

            // --- Normalize score to [-3, +3] ---
            const minScore = -250;
            const maxScore = 250;
            let normalized = ((score - minScore) / (maxScore - minScore)) * 6 - 3;

            // Clamp to ensure no overflow
            normalized = Math.max(-3, Math.min(3, normalized));

            // --- Display Result ---
            scoreDisplay.textContent = normalized.toFixed(2);
            resultContainer.classList.remove('hidden');
        });

        form.addEventListener('reset', () => {
            resultContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');
        });

        function showError(msg) {
            errorMessage.textContent = msg;
            errorMessage.classList.remove('hidden');
        }
    });
</script>



</body>
</html>

